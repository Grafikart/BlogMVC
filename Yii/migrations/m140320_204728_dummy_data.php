<?php

class m140320_204728_dummy_data extends CDbMigration
{
    public function safeUp()
    {
        $posts = array(
           1 =>
"I don't want to be rescued. So I really am important? How I feel when I'm drunk is correct? Leela's gonna kill me. It's a T. It goes \"tuh\". File not found. She also liked to shut up!

## The Why of Fry

I love this planet! I've got wealth, fame, and access to the depths of sleaze that those things bring. You won't have time for sleeping, soldier, not with all the bed making you'll be doing. Alright, let's mafia things up a bit. Joey, burn down the ship. Clamps, burn down the crew.

*   So I really am important? How I feel when I'm drunk is correct?
*   No! The cat shelter's on to me.
*   No, she'll probably make me do it.

### My Three Suns

OK, this has gotta stop. I'm going to remind Fry of his humanity the way only a woman can. Why yes! Thanks for noticing. Now, now. Perfectly symmetrical violence never solved anything.

#### A Clockwork Origin

You can see how I lived before I met you. Can we have Bender Burgers again? I guess because my parents keep telling me to be more ladylike. As though! Hey! I'm a porno-dealing monster, what do I care what you think? You know, I was God once.

1.  You lived before you met me?!
2.  They're like sex, except I'm having them!
3.  You, a bobsleder!? That I'd like to see!

##### Leela's Homeworld

Yep, I remember. They came in last at the Olympics, then retired to promote alcoholic beverages! Large bet on myself in round one. Actually, that's still true. Ask her how her day was. In your time, yes, but nowadays shut up! Besides, these are adult stemcells, harvested from perfectly healthy adults whom I killed for their stemcells. Why not indeed!",
            2 =>
"Yep, I remember. They came in last at the Olympics, then retired to promote alcoholic beverages! You know, I was God once. That could be 'my' beautiful soul sitting naked on a couch. If I could just learn to play this stupid thing. Okay, I like a challenge. I barely knew Philip, but as a clergyman I have no problem telling his most intimate friends all about him.

## I, Roommate

Now, now. Perfectly symmetrical violence never solved anything. With a warning label this big, you know they gotta be fun! I'm Santa Claus!

*   You guys realize you live in a sewer, right?
*   Okay, I like a challenge.
*   Robot 1-X, save my friends!  And Zoidberg!

### Love and Rocket

Can we have Bender Burgers again? This is the worst part. The calm before the battle. For one beautiful night I knew what it was like to be a grandmother. Subjugated, yet honored. You'll have all the Slurm you can drink when you're partying with Slurms McKenzie!

#### War Is the H-Word

You know the worst thing about being a slave? They make you work, but they don't pay you or let you go. Ooh, name it after me! Kids don't turn rotten just from watching TV. You guys aren't Santa! You're not even robots. How dare you lie in front of Jesus?

1.  Why yes! Thanks for noticing.
2.  You guys aren't Santa! You're not even robots. How dare you lie in front of Jesus?
3.  There's no part of that sentence I didn't like!
4.  I had more, but you go ahead.
5.  Bender, we're trying our best.

##### Anthology of Interest II

Goodbye, cruel world. Goodbye, cruel lamp. Goodbye, cruel velvet drapes, lined with what would appear to be some sort of cruel muslin and the cute little pom-pom curtain pull cords. Cruel though they may be&hellip; It must be wonderful. Leela, are you alright? You got wanged on the head.",
           3 =>
"You, a bobsleder!? That I'd like to see! I barely knew Philip, but as a clergyman I have no problem telling his most intimate friends all about him. Robot 1-X, save my friends!  And Zoidberg! You know the worst thing about being a slave? They make you work, but they don't pay you or let you go. OK, this has gotta stop. I'm going to remind Fry of his humanity the way only a woman can. Good news, everyone! There's a report on TV with some very bad news!

## Roswell That Ends Well

Why yes! Thanks for noticing. For the last time, I don't like lilacs!  Your 'first' wife was the one who liked lilacs! We'll go deliver this crate like professionals, and then we'll go home.

*   Why yes! Thanks for noticing.
*   That's the ONLY thing about being a slave.
*   OK, this has gotta stop. I'm going to remind Fry of his humanity the way only a woman can.
*   It must be wonderful.

### A Tale of Two Santas

This is the worst part. The calm before the battle. There's no part of that sentence I didn't like! Ask her how her day was.

#### Bendless Love

Your best is an idiot! Oh dear! She's stuck in an infinite loop, and he's an idiot! Well, that's love for you. I'm sure those windmills will keep them cool. I had more, but you go ahead. Fry! Stay back! He's too powerful! No, she'll probably make me do it.

1.  I barely knew Philip, but as a clergyman I have no problem telling his most intimate friends all about him.
2.  Kif might!
3.  I barely knew Philip, but as a clergyman I have no problem telling his most intimate friends all about him.
4.  Goodbye, cruel world. Goodbye, cruel lamp. Goodbye, cruel velvet drapes, lined with what would appear to be some sort of cruel muslin and the cute little pom-pom curtain pull cords. Cruel though they may be&hellip;

##### The Series Has Landed

Ooh, name it after me! In your time, yes, but nowadays shut up! Besides, these are adult stemcells, harvested from perfectly healthy adults whom I killed for their stemcells. No, of course not. It was&hellip; uh&hellip; porno. Yeah, that's it. So I really am important? How I feel when I'm drunk is correct? I suppose I could part with 'one' and still be feared&hellip; Well I'da done better, but it's plum hard pleading a case while awaiting trial for that there incompetence.",
            4 =>
"I love this planet! I've got wealth, fame, and access to the depths of sleaze that those things bring. You, minion. Lift my arm. AFTER HIM! I don't want to be rescued. I had more, but you go ahead. I'm Santa Claus! Hey! I'm a porno-dealing monster, what do I care what you think?

## The Deep South

Oh dear! She's stuck in an infinite loop, and he's an idiot! Well, that's love for you. I was having the most wonderful dream. Except you were there, and you were there, and you were there! File not found. Man, I'm sore all over. I feel like I just went ten rounds with mighty Thor. But, like most politicians, he promised more than he could deliver. I guess because my parents keep telling me to be more ladylike. As though!

*   They're like sex, except I'm having them!
*   You know, I was God once.
*   Then we'll go with that data file!

### Devil's Hands are Idle Playthings

Actually, that's still true. No, she'll probably make me do it. Oh, I always feared he might run off like this. Why, why, why didn't I break his legs? WINDMILLS DO NOT WORK THAT WAY! GOOD NIGHT! This is the worst part. The calm before the battle.

#### The Deep South

For the last time, I don't like lilacs!  Your 'first' wife was the one who liked lilacs! Pansy. You know, I was God once.

1.  You, a bobsleder!? That I'd like to see!
2.  Well I'da done better, but it's plum hard pleading a case while awaiting trial for that there incompetence.

##### Bendin' in the Wind

I usually try to keep my sadness pent up inside where it can fester quietly as a mental illness. No, of course not. It was&hellip; uh&hellip; porno. Yeah, that's it. Your best is an idiot! There's no part of that sentence I didn't like! They're like sex, except I'm having them! I had more, but you go ahead.",
            5 =>
"Your best is an idiot! Can we have Bender Burgers again? That could be 'my' beautiful soul sitting naked on a couch. If I could just learn to play this stupid thing. You guys realize you live in a sewer, right? Now that the, uh, garbage ball is in space, Doctor, perhaps you can help me with my sexual inhibitions? I love this planet! I've got wealth, fame, and access to the depths of sleaze that those things bring.

## Kif Gets Knocked Up A Notch

Leela, are you alright? You got wanged on the head. Come, Comrade Bender! We must take to the streets! Man, I'm sore all over. I feel like I just went ten rounds with mighty Thor.

*   I love this planet! I've got wealth, fame, and access to the depths of sleaze that those things bring.
*   OK, this has gotta stop. I'm going to remind Fry of his humanity the way only a woman can.

### Anthology of Interest I

We're rescuing ya. I'm sure those windmills will keep them cool. Oh dear! She's stuck in an infinite loop, and he's an idiot! Well, that's love for you. But I've never been to the moon!

#### Lrrreconcilable Ndndifferences

We'll go deliver this crate like professionals, and then we'll go home. You are the last hope of the universe. Fatal. No! The cat shelter's on to me. Fry! Stay back! He's too powerful! So I really am important? How I feel when I'm drunk is correct?

1.  I barely knew Philip, but as a clergyman I have no problem telling his most intimate friends all about him.
2.  We can't compete with Mom! Her company is big and evil! Ours is small and neutral!
3.  Hello, little man. I will destroy you!

##### Bendless Love

Hello, little man. I will destroy you! Ooh, name it after me! Well I'da done better, but it's plum hard pleading a case while awaiting trial for that there incompetence. You know, I was God once. You won't have time for sleeping, soldier, not with all the bed making you'll be doing. With a warning label this big, you know they gotta be fun!",
            6 =>
"Five hours? Aw, man! Couldn't you just get me the death penalty? Daylight and everything. What's with you kids? Every other day it's food, food, food. Alright, I'll get you some stupid food.

## Bendin' in the Wind

<img src=\"http://lorempicsum.com/futurama/200/150/1\" class=\"img-thumbnail\" style=\"float:left; margin-right:10px;\">

Lorem ipsum dolor sit amet, consectetur adipisicing elit. Suscipit, modi, libero, earum, fugiat beatae ipsa quae accusamus eligendi minima eos sint consequuntur voluptate nihil inventore voluptatum? Possimus neque similique quam.

Nemo, aliquam non nulla corporis veritatis molestiae omnis nobis dolores dicta dolorum accusamus porro ipsum rem tempora maxime quisquam accusantium facilis saepe consequatur qui doloribus iusto distinctio perspiciatis modi voluptatum?

Illum temporibus natus cumque recusandae non fugiat quisquam fuga repellendus. Quas, esse, a rem possimus vero sequi fugit non dolor corrupti in similique repudiandae excepturi quidem perspiciatis soluta amet qui?

*   Fetal stemcells, aren't those controversial?
*   Yes! In your face, Gandhi!
*   The key to victory is discipline, and that means a well made bed. You will practice until you can make your bed in your sleep.

### Why Must I Be a Crustacean in Love?

<img src=\"http://lorempicsum.com/futurama/200/150/2\" class=\"img-thumbnail\" style=\"float:right; margin-left:10px;\">

We're rescuing ya. I'm Santa Claus! Have you ever tried just turning off the TV, sitting down with your children, and hitting them? Calculon is gonna kill us and it's all everybody else's fault! I just want to talk. It has nothing to do with mating. Fry, that doesn't make sense. Ummm&hellip;to eBay?

#### Attack of the Killer App

Why would I want to know that? It's toe-tappingly tragic! You won't have time for sleeping, soldier, not with all the bed making you'll be doing. I've got to find a way to escape the horrible ravages of youth. Suddenly, I'm going to the bathroom like clockwork, every three hours. And those jerks at Social Security stopped sending me checks. Now 'I'' have to pay ''them'! I was all of history's great robot actors - Acting Unit 0.8; Thespomat; David Duchovny! Five hours? Aw, man! Couldn't you just get me the death penalty?

1.  But, like most politicians, he promised more than he could deliver.
2.  Calculon is gonna kill us and it's all everybody else's fault!
3.  Bender?! You stole the atom.

##### A Tale of Two Santas

Kif might! I wish! It's a nickel. OK, this has gotta stop. I'm going to remind Fry of his humanity the way only a woman can. Kif, I have mated with a woman. Inform the men. Look, everyone wants to be like Germany, but do we really have the pure strength of 'will'?",
        );
        
        $this->cleanUp();
        $this->insert('users', array(
            'username' => 'admin',
            'password' => 'd033e22ae348aeb5660fc2140aec35850c4da997',
        ));
        $this->insert('categories', array(
            'name' => 'Category #1',
            'slug' => 'category-1',
            'post_count' => 2,
        ));
        $this->insert('categories', array(
            'name' => 'Category #2',
            'slug' => 'category-2',
            'post_count' => 2,
        ));
        $this->insert('categories', array(
            'name' => 'Category #3',
            'slug' => 'category-3',
            'post_count' => 2,
        ));
        // posts
        $this->insert('posts', array(
            'category_id' => 1,
            'user_id' => 1,
            'name' => 'Space Pilot 3000',
            'slug' => 'space-pilot-3000',
            'content' => $posts[1],
            'created' => '2013-09-22 18:00:00',
        ));
        $this->insert('posts', array(
            'category_id' => 2,
            'user_id' => 1,
            'name' => 'Rebirth',
            'slug' => 'rebirth',
            'content' => $posts[2],
            'created' => '2013-09-22 16:49:55',
        ));
        $this->insert('posts', array(
            'category_id' => 3,
            'user_id' => 1,
            'name' => 'Future shock',
            'slug' => 'future-shock',
            'content' => $posts[3],
            'created' => '2013-09-22 16:52:52',
        ));
        $this->insert('posts', array(
            'category_id' => 1,
            'user_id' => 1,
            'name' => 'Parasites lost',
            'slug' => 'parasites-lost',
            'content' => $posts[4],
            'created' => '2013-09-22 16:53:16',
        ));
        $this->insert('posts', array(
            'category_id' => 2,
            'user_id' => 1,
            'name' => 'The sting',
            'slug' => 'the-sting',
            'content' => $posts[5],
            'created' => '2013-09-22 16:53:30',
        ));
        $this->insert('posts', array(
            'category_id' => 3,
            'user_id' => 1,
            'name' => 'The Route Of All Evil',
            'slug' => 'the-route-of-all-evil',
            'content' => $posts[6],
            'created' => '2013-09-23 16:54:57',
        ));
        $this->insert('comments', array(
            'post_id' => 6,
            'username' => 'User #1',
            'mail' => 'contact@test.fr',
            'content' => 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Vero, laudantium voluptatibus quae doloribus dolorem earum dicta quasi. Fugit, eligendi, voluptatibus corporis deleniti perferendis accusantium totam harum dolor ab veniam laudantium!',
            'created' => '2013-09-22 19:45:53',
        ));
        $this->insert('comments', array(
            'post_id' => 6,
            'username' => 'User #2',
            'mail' => 'contact@wordpress.com',
            'content' => 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Vero, laudantium voluptatibus quae doloribus dolorem earum dicta quasi. Fugit, eligendi, voluptatibus corporis deleniti perferendis accusantium totam harum dolor ab veniam laudantium!',
            'created' => '2013-09-22 19:46:11',
        ));
        $this->insert('comments', array(
            'post_id' => 6,
            'username' => 'User #3',
            'mail' => 'contact@lol.fr',
            'content' => "Hi!\r\nThis is my first comment!",
            'created' => '2013-09-22 20:07:42',
        ));
    }

    public function safeDown()
    {
        $this->cleanUp();
    }
    protected function cleanUp()
    {
        $this->truncateTable('comments');
        $this->truncateTable('posts');
        $this->truncateTable('categories');
        $this->truncateTable('users');
    }

    /**
     * Truncates table with provided name. Postgresql uses different approach
     * for sequences and there are hardcoded bits which may not work.
     *
     * @param $name string Table name.
     *
     * @return void
     * @since 0.1.0
     */
    public function truncateTable($name)
    {
        if (!preg_match('#^[\w_]+$#', $name)) {
            return;
        }
        $this->delete($name);
        $driverName = $this->getDbConnection()->getDriverName();
        if ($driverName === 'pgsql') { // ffuuu
            $this->execute('ALTER SEQUENCE ' . $name . '_id_seq RESTART WITH 1');
        } else if ($driverName === 'sqlite') {
            $this->update(
                'SQLITE_SEQUENCE',
                array('seq' => 0,),
                'name = :name',
                array(':name' => $name,)
            );
        } else {
            $this->execute('ALTER TABLE ' . $name . ' AUTO_INCREMENT = 1');
        }
    }
}